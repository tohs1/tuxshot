#!/bin/bash
clear
# ASCII art
cat << "EOF"
                                        %*+++++++++++++++++++++                                     
                                       ##+=--------------------                                     
                                   :...==-...........................                               
                                 ++:....:---------------------:......:                              
                           %#*+++==-:::::----------------------::::::=++++++                        
                          **+:...::---------------------------------::......                        
                        ...:-::::------------------------------------:::::::.-++                    
                     %**-::::------------:::::::::::::::::::::-------------::-=++*                  
                    **+-------------::::::::::::::::::::::::::::::::--------------                  
                  ..:=-::----------:::::::::::::::::::::::::::::::::::::::----::..:-++              
                  ...::------::::::::::::::::::::::::::::::::::::::::...  .:-----:.:++              
                  ...::------::::::::::::::::::::::::::::::::::::::.....  ..::---:.:++              
                  ...::------::::::::::::::::::::::::::::::::::::............::--:.:++              
              +*-.::------::::::::::::::::................:::::::.....  ........::---:..            
              ++-.:------:::::::::............................:::.......    .....:--:...            
              ++-.:------::::..................................::::.....        .:--:...            
            ..:--::-----::......................................::::....  .......::::::..:=+        
            ...::------::....::::::...............................::................:--:.:=++       
            ...::------::....:::::.................................:......        ..:--:.:=++       
            ...::------::....::::........  .........................:::...        ..:--:.:=++       
            ...:-------::....:::....................................::::::..    .:-----:.:=++       
            ...:------:::....:::....................................:::::::......:-----:.:=++       
            ...:------:::....:::.... ........................ ......:::::::::::::------:.:=++       
            ...::-----:::....:::.... ........................ ......::::::::::::::::---:.:=++       
            ...::-----:::.....::.... ...............................:::::::::...  ..:--:.:=++       
            ...:-------:::.......... ..............................::::::::.....  ..:--:.:=++       
            ...::------:::::....:..................................::::::::.      ..:--:.:=++       
            ...:-------:::::....:::..............................::::::::::.      ..:--:.:=++       
            -=---:------::::....:::::.............................:::::::::.......:::::--=**        
            ++++-.:------:::....:::::..............................::::::::::....:-:::.:=*#         
              ++-.:--===-:.....::::::::......................:.....::::::::::::::---:...            
              **=::------:.::::::::::::::::..............:::::....::::::::::---------:::            
              %#*+-::::::-------::::::::::::............::::::....:::::::::------::-==++            
               %%#:.....:-=====--:::::::::::::::::::::::::::::....:::::::::------:.:++              
              %%##+:.::--========---:...........::::::::::::::....:::::::::------:.:++              
            %%%%%#*+=--:--=======--:.............................::::----------::-=+##              
            #####%##*+-::-=======-::..::::::::.................:::::----------:..:**                
        %%#########%##**=-::----:::------::::::::::::::::::::::------------::--:..                  
        %%###%%#######%%*=----::..:-==-----:::::::::::::::::::-------------:-=**                    
        %%###%%%%##**##%#*+=-:....:-=--------------------------------:....:-+*#                     
        %%#*#%%%%%##*######*+=-:.:----------------------------------:.......                        
        %%**##%%%%%%###*****##%%%*+-...::---------------------:......-@                             
        @@%######%%%%#######%%@@ ##*+++==-::::::::::::::::::::-=++++++                              
            ***##%%%%%%%%%%%@@         ++-.....................:                                    
            +*###*********%%@           +-........  ......... .                                     
              %%##########                                                                          
               @%%######%%                                                                          
EOF
# Make sure they actually are ready
echo
echo "This program patches will patch your OneShot game files. It expects the Steam version of OneShot to be installed and ready."
read -p "Are you sure to continue? [Y/n] " contin
if [[ "$contin" != "y" && -n "$contin" ]]; then
    exit 1
fi
cd "$HOME/.steam/root/steamapps/common/OneShot"
# Remove outdated libraries
rm -f libdrm.so.2
rm -f libGLdispatch.so.0
rm -f libstdc++.so.6
rm -f librt.so.1
rm -f libcrypt.so.1
rm -f libcrypto.so.1.1
# Check if OneShot's Document directory exists
if [[ ! -d "~/Documents/OneShot" ]]; then
    mkdir -p "~/Documents/OneShot"
    chmod 777 "~/Documents/OneShot"
fi
ln -sf "$HOME/.steam/root/steamapps/common/OneShot/_______" "$HOME/Documents/OneShot/_______"
echo "Done! OneShot should now work. If it doesn't, it's an issue with the distro rather than OneShot itself."
